buildscript {
    repositories {
        maven { url "https://plugins.gradle.org/m2/" }
    }
    dependencies {
        classpath 'gradle.plugin.com.matthewprenger:CurseGradle:1.4.0' // To publish to curseforge
        classpath "net.saliman:gradle-properties-plugin:1.5.1" // To have private properties
    }
}

apply plugin: com.matthewprenger.cursegradle.CurseGradlePlugin // Apply it by fully qualified name
apply plugin: net.saliman.gradle.plugin.properties.PropertiesPlugin // Apply it by fully qualified name
apply plugin: 'idea'
apply plugin: 'java'

// Make sure that UTF-8 is supported
tasks.withType(JavaCompile).configureEach({
    it.options.encoding = 'UTF-8'
})

project.afterEvaluate {
    task setExtras() {
        System.setProperty("bml.isDevEnv", "true")
    }

    tasks.forEach {
        if (it.name.startsWith("prepareRun"))
            it.dependsOn setExtras
    }
}

// Include resources generated by data generators.
sourceSets.main.resources { srcDir 'src/main/generated_resources' }

repositories {
    maven {
        url "https://www.cursemaven.com"
        content {
            includeGroup "curse.maven"
        }
    }
}
